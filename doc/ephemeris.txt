*ephemeris.txt*	a diary plugin for vim
HP4k1h5 <robertwalks@gmail.com>                                    *ephemeris*

==============================================================================
CONTENTS                                                  *ephemeris-contents*
  1. Introduction............................................|ephemeris-intro|
  2. Configuration..........................................|ephemeris-config|
  3. Commands.............................................|ephemeris-commands|
  4. Functions...........................................|ephemeris-functions|

==============================================================================
INTRODUCTION                                                 *ephemeris-intro*

ephemeris is a diary and calendar extension plugin for vim. It provides a
collection of functions and commands that can be used to create, edit, and
curate diary/log entries.

The diary is defined by the directories and files found recursively under the
directory set in the global variable |g:ephemeris_diary|. ephemeris does not
rely on any external programs and does not interfere with any external
program, such as cal, etc. This plugin works best when the directory structure
of |g:ephemeris_diary| is YYYY/MM/DD.md, as follows:
>
  ├── 2019
  │   └── 09
  │       ├── 16.md
  │   └── 12
  │       └── 20.md
  ├── 2020
  │   └── 05
  │       ├── 01.md
  │       ├── 04.md
<
This tree structure is provided by default by ephemeris functions. This plugin
will only provide limited functionality if the directory structure does not
include a date-aligned directory structure as outlined above.

HELP
          see 'README.md' and 'doc/ephemeris.txt'

THANKS
          mattn <https://github.com/mattn/calendar-vim>
for a great plugin and the inspiration to make some helper functions

          junegunn <https://github.com/junegunn/vader.vim
for the testing suite


==============================================================================
CONFIGURATION                                               *ephemeris-config*

                                                           *g:ephemeris_diary*
Directory path for diary. All functions that rely on this variable/directory
are dependent on it having the following directory structure:
>
    ├── 2019
    │   └── 09
    │       ├── 16.md
    │   └── 12
    │       └── 20.md
    ├── 2020
    │   └── 05
    │       ├── 01.md
    │       ├── 04.md
<
files that do not conform to the `g:ephemeris_diary/YYYY/MM/DD.md` format,
will not be available to date reliant functions such as
|ephemeris#lst#copy_todos()|

Default: { No default! } must be set by user

Example:  :let g:ephemeris_diary = '~/diary'

                                                           *g:ephemeris_todos*
marker to indicate the beginning of the list of task items to be copied over
to current day's diary entry. see |ephemeris#lst#copy_todos()|

default: TODOs

==============================================================================
COMMANDS                                                  *ephemeris-commands*

:EphemerisCreateIndex                                  *:EphemerisCreateIndex*
  Create markdown diary index of all '.md' files found under the
  |g:ephemeris_diary| directory, and go to vertical split.  Calls
  |ephemeris#ind#create_index()|

:EphemerisGotoIndex                                      *:EphemerisGotoIndex*
  Open diary index in a vertical split or focus diary index buffer. Index is
  found at |g:ephemeris_diary|/index.md. Calls |ephemeris#ind#goto_index()|

:EphemerisCopyTodos                                      *:EphemerisCopyTodos*
  Look backwards through previous entries for last |g:ephemeris_todos| marker,
  as defined by the tasks found below the string.  Calls
  |ephemeris#lst#copy_todos()|

:EphemerisFilterTasks [x]                              *:EphemerisFilterTasks*
  Delete completed tasks, e.g. list items containing `- [x]`, and all
  associated subblocks until the next incomplete task, e.g. list items
  containing `- [ ]`, a |g:ephemeris_todos| marker, 2 newlines, or EOF. See
  example in |ephemeris#lst#filter_tasks()|.

:EphemerisToggleTask                                    *:EphemerisToggleTask*
  Toggles the state of a task between
>
    - [ ] incomplete
      and
    - [x] complete
<
  when the cursor is on a line containing a task. will not affect the state of
  any other tasks. Calls |ephemeris#lst#toggle_task()|

==============================================================================
FUNCTIONS                                                *ephemeris-functions*

ephemeris#fs#get_set_today()                    *ephemeris#fs#get_set_today()*
  Creates a diary entry buffer for the current day, and, if necessary, the
  required `g:ephemeris_diary/YYYY/MM/...` directory path. See
  |g:ephemeris_diary|

  Returns a string containing the current day's diary entry filepath TODO:
  elseif focus l:today

ephemeris#fs#get_g_diary()                        *ephemeris#fs#get_g_diary()*
  helper function to get/set state of |g:ephemeris_diary| if g:ephemeris_diary
  is not found an error is thrown errors should be handled by calling
  functions

  returns a string containing the expanded g:ephemeris_diary directory path

ephemeris#fs#get_set_g_todos()                *ephemeris#fs#get_set_g_todos()*
  helper function to get/set state of g:ephemeris_todos

ephemeris#ind#goto_index({dir})                   *ephemeris#ind#goto_index()*
  Find or create, and go to diary index file. Index located at
  |g:ephemeris_diary|/index.md

ephemeris#ind#create_index()                    *ephemeris#ind#create_index()*
  Create an index of diary entries found recursively under the
  |g:ephemeris_diary| directory at `g:ephemeris_diary/index.md`, and open the
  index in a vertical split. Entries are formatted as markdown links.

ephemeris#lst#copy_todos()                        *ephemeris#lst#copy_todos()*
  Copy TODOs from last set of TODOs going back up to 10 years. Your
  |g:ephemeris_diary| directory must  be organized in a `.../YYYY/MM/DD.md`
  hierarchy, in order for this function to know which set of TODOs are _most
  recent_. TODOs are defined by the string set in |g:ephemeris_todos|. Default
  is 'TODOs'. **Everything** below that marker is copied to the current day's
  diary entry. It will open today's diary entry in a split. This function can
  be called from anywhere.

ephemeris#lst#filter_tasks()                    *ephemeris#lst#filter_tasks()*
  Filter out completed tasks and their associated blocks in the current
  buffer. i.e., if you have a set of tasks like,
>
    - [ ] ephemeris docs
      -[x] `.md`
        - more list items but not tasks
          and a nested block of text
          with a few lines
      -[ ] `txt`
    - [x] export autocommands
<
  and you run `:EphemerisFilterTasks` in the command-line mode, you will be
  left with
>
    - [ ] ephemeris docs
      -[ ] `txt`
<

ephemeris#lst#toggle_task()                      *ephemeris#lst#toggle_task()*
  Toggle state of task on the line under the cursor between
>
    - [ ] incomplete, and
    - [x] complete
<
  whether or not there is a checkbox return 0


vim:tw=78:ts=8:ft=help:norl:
